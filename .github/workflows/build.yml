name: Build

on: push

jobs:
    build:
        runs-on: ubuntu-latest
        services:
            redis:
                image: redis
        steps:
          - uses: actions/checkout@v2
          - name: Setup
            uses: actions/setup-dotnet@v1
            with:
                dotnet-version: 6.0.x
          - name: Build
            run: dotnet build -c Release
          - name: Test
            env:
                POSTGRES_HOST: postgres
            run: dotnet test --no-build
